# Bomberman Gamepad Support

Just a quick hack to add Gamepad support to the new Bombermine/Bomberman game at: [http://bombermine.com](http://bombermine.com)

Drag this bookmarklet to your bookmarksbar and click on it when you are playing:

<a href="javascript:(function(){function e(a){if(\"[object Array]\"===Object.prototype.toString.call(a)){for(var c=[],d=0,e=a.length;d<e;d++)c[d]=arguments.callee(a[d]);return c}if(\"object\"===typeof a){c={};for(d in a)c[d]=arguments.callee(a[d]);return c}return a}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3\/60)};var a={TYPICAL_BUTTON_COUNT:16,TYPICAL_AXIS_COUNT:4,ticking:!1,gamepad:null,oldPad:null,prevTimestamp:0,init:function(){!navigator.webkitGetGamepads&&!navigator.webkitGamepads?alert(\"No gamepad support!\"):a.startPolling()},startPolling:function(){a.ticking||(a.ticking=!0,a.tick())},stopPolling:function(){a.ticking=!1},tick:function(){a.pollStatus();a.scheduleNextTick()},scheduleNextTick:function(){a.ticking&&requestAnimFrame(a.tick)},pollStatus:function(){a.oldPad=e(a.gamepad);a.pollGamepad();var b=a.gamepad;b&&!(b.timestamp&&b.timestamp==a.prevTimestamp)&&(a.prevTimestamp=b.timestamp,a.oldPad.constructor==Object&&a.updateDisplay())},pollGamepad:function(){var b=navigator.webkitGetGamepads&&navigator.webkitGetGamepads();b&&b[0]&&(a.gamepad=b[0])},ANALOGUE_BUTTON_THRESHOLD:0.5,AXIS_THRESHOLD:0.3,buttonPressed_:function(b,c){return b.buttons[c]&&b.buttons[c]>a.ANALOGUE_BUTTON_THRESHOLD},stickMoved_:function(b,c,d){return\"undefined\"==typeof b.axes[c]?!1:d?b.axes[c]<-a.AXIS_THRESHOLD:b.axes[c]>a.AXIS_THRESHOLD},updateDisplay:function(){var b=a.gamepad,c=a.oldPad;c.buttons&&(a.buttonPressed_(b,0)!=a.buttonPressed_(c,0)&&a.buttonPressed_(b,0)&&appInputBomb(),a.buttonPressed_(b,2)!=a.buttonPressed_(c,2)&&a.buttonPressed_(b,2)&&appInputDetonation(),a.buttonPressed_(b,3)!=a.buttonPressed_(c,3)&&a.buttonPressed_(b,3)&&appInputPause(),a.buttonPressed_(b,8)!=a.buttonPressed_(c,8)&&a.buttonPressed_(b,8)&&appInputTab(),a.buttonPressed_(b,1)!=a.buttonPressed_(c,1)&&(a.buttonPressed_(b,1)?keyDown(16):keyUp(16)),a.stickMoved_(b,1,!1)!=a.stickMoved_(c,1,!1)&&(a.stickMoved_(b,1,!1)?keyDown(8):keyUp(8)),a.stickMoved_(b,1,!0)!=a.stickMoved_(c,1,!0)&&(a.stickMoved_(b,1,!0)?keyDown(2):keyUp(2)),a.stickMoved_(b,0,!1)!=a.stickMoved_(c,0,!1)&&(a.stickMoved_(b,0,!1)?keyDown(1):keyUp(1)),a.stickMoved_(b,0,!0)!=a.stickMoved_(c,0,!0)&&(a.stickMoved_(b,0,!0)?keyDown(4):keyUp(4)))}};a.init()})();)">Bombermine Bookmarklet</a>

# License

MIT License
